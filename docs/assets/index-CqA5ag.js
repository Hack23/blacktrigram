const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./game-components-DzR1FP.js","./vendor-mA5Mej.js"])))=>i.map(i=>d[i]);
import{r as n,j as t,f as I,g as C,R as M}from"./vendor-mA5Mej.js";import{C as D,P as z,_ as A,u as _,a as g,A as R,G as u,I as E,b as N}from"./game-components-DzR1FP.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();function L(i){typeof window<"u"&&(window.blackTrigramApp=i,window.pixiApp=i,window.__PIXI_APP__=i,window.blackTrigramApp={pixiApp:i,version:"1.0.0",gameState:"intro"})}function b(i,d){const a=z[i],c={x:d===0?300:500,y:400};return{id:`player_${d+1}`,name:a.name,archetype:i,health:a.baseHealth,maxHealth:a.baseHealth,ki:a.baseKi,maxKi:a.baseKi,stamina:a.baseStamina,maxStamina:a.baseStamina,energy:100,maxEnergy:100,attackPower:a.stats.attackPower,defense:a.stats.defense,speed:a.stats.speed,technique:a.stats.technique,pain:0,consciousness:100,balance:100,momentum:0,currentStance:a.coreStance,combatState:D.IDLE,position:c,isBlocking:!1,isStunned:!1,isCountering:!1,lastActionTime:0,recoveryTime:0,lastStanceChangeTime:0,statusEffects:[],activeEffects:[],vitalPoints:[],totalDamageReceived:0,totalDamageDealt:0,hitsTaken:0,hitsLanded:0,perfectStrikes:0,vitalPointHits:0}}const W=n.lazy(()=>A(()=>import("./game-components-DzR1FP.js").then(i=>i.E),__vite__mapDeps([0,1]),import.meta.url)),G=n.lazy(()=>A(()=>import("./game-components-DzR1FP.js").then(i=>i.T),__vite__mapDeps([0,1]),import.meta.url));function H(){_();const[i,d]=n.useState(null),[a,c]=n.useState(!1),[o,l]=n.useState(null),[p,x]=n.useState(null),[w,y]=n.useState(!1),[s,j]=n.useState({width:window.innerWidth,height:window.innerHeight,isMobile:window.innerWidth<768,isTablet:window.innerWidth>=768&&window.innerWidth<1024,isDesktop:window.innerWidth>=1024}),v=n.useCallback(e=>{e&&typeof window<"u"&&L(e)},[]);n.useEffect(()=>{const r=setInterval(()=>{const h=window.pixiApp;h&&v(h)},100);return setTimeout(()=>clearInterval(r),5e3),()=>clearInterval(r)},[v]),n.useEffect(()=>{(async()=>{try{window.focus(),window.addEventListener("error",r=>{}),window.addEventListener("unhandledrejection",r=>{(r.reason?.message?.includes("Failed to load")||r.reason?.message?.includes("no supported source"))&&r.preventDefault()}),y(!0)}catch{y(!0)}})()},[]);const m=n.useCallback(e=>{d(e),c(!0),l(null),x(null)},[]),P=n.useCallback(e=>{c(!1),l(b(g.MUSA,e)),x({totalDamageDealt:150,totalDamageTaken:100,criticalHits:3,vitalPointHits:2,techniquesUsed:8,perfectStrikes:1,consecutiveWins:1,matchDuration:120,totalMatches:1,maxRounds:3,winner:e,totalRounds:2,currentRound:2,timeRemaining:0,combatEvents:[],finalScore:{player1:e===0?2:0,player2:e===1?2:0},roundsWon:{player1:e===0?2:0,player2:e===1?2:0},player1:{wins:e===0?1:0,losses:e===0?0:1,hitsTaken:5,hitsLanded:8,totalDamageDealt:e===0?150:100,totalDamageReceived:e===0?100:150,techniques:["천둥벽력","유수연타"],perfectStrikes:e===0?1:0,vitalPointHits:e===0?2:1,consecutiveWins:e===0?1:0,matchDuration:120},player2:{wins:e===1?1:0,losses:e===1?0:1,hitsTaken:8,hitsLanded:5,totalDamageDealt:e===1?150:100,totalDamageReceived:e===1?100:150,techniques:["화염지창","벽력일섬"],perfectStrikes:e===1?1:0,vitalPointHits:e===1?2:1,consecutiveWins:e===1?1:0,matchDuration:120}})},[]),f=n.useCallback(()=>{d(null),c(!1),l(null),x(null)},[]),T=()=>{if(o&&p)return t.jsx(n.Suspense,{fallback:t.jsx("div",{className:"loading-screen",children:"로딩 중..."}),children:t.jsx(W,{winner:o,matchStatistics:p,onReturnToMenu:f,onRestart:()=>m(i),width:s.width,height:s.height})});if(a&&i)switch(i){case u.TRAINING:return t.jsx(n.Suspense,{fallback:t.jsx("div",{className:"loading-screen",children:"로딩 중..."}),children:t.jsx(G,{player:k,onPlayerUpdate:h=>{},onReturnToMenu:f,width:s.width,height:s.height})});case u.VERSUS:case u.PRACTICE:const e=b(g.MUSA,0),r=b(g.AMSALJA,1);return t.jsx(N,{players:[e,r],currentRound:1,timeRemaining:180,isPaused:!1,onPlayerUpdate:(h,O)=>{},onReturnToMenu:f,onGameEnd:P,gameMode:i,width:s.width,height:s.height});default:return t.jsx(E,{onMenuSelect:m,width:s.width,height:s.height})}return t.jsx(E,{onMenuSelect:m,width:s.width,height:s.height})},S=n.useRef(null);if(n.useEffect(()=>{S.current?.focus()},[w]),n.useEffect(()=>{const e=()=>{const r=window.innerWidth,h=window.innerHeight;j({width:r,height:h,isMobile:r<768,isTablet:r>=768&&r<1024,isDesktop:r>=1024})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),!w)return t.jsx("div",{className:"app loading","data-testid":"app-container",children:t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",backgroundColor:"#1a1a2e"},children:"흑괘 로딩 중... Loading Black Trigram..."})});const k=b(g.MUSA,0);return t.jsx(R,{children:t.jsxs("div",{className:"app",tabIndex:0,ref:S,style:{outline:"none",width:"100vw",height:"100vh",overflow:"hidden"},"data-testid":"app-container",children:[t.jsx(I,{width:s.width,height:s.height,backgroundColor:657935,antialias:!0,autoDensity:!0,resizeTo:window,children:T()}),t.jsxs("div",{className:"test-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:100},"data-testid":"ui-overlay",children:[i===null&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"intro-screen","data-testid":"intro-screen",style:{pointerEvents:"none",width:"100%",height:"100%",position:"absolute"}}),t.jsx("button",{className:"training-button","data-testid":"training-button",style:{position:"absolute",top:s.isMobile?"65%":"60%",left:s.isMobile?"5%":"25%",padding:"12px 24px",backgroundColor:"rgba(0, 212, 255, 0.9)",color:"white",border:"2px solid #00d4ff",borderRadius:"8px",cursor:"pointer",pointerEvents:"auto",fontSize:s.isMobile?"14px":"16px",fontWeight:"bold",zIndex:50,boxShadow:"0 0 20px rgba(0, 212, 255, 0.5)",transform:"none",maxWidth:"200px"},onClick:()=>m(u.TRAINING),children:"훈련 모드 - Training"}),t.jsx("button",{className:"combat-button","data-testid":"combat-button",style:{position:"absolute",top:s.isMobile?"75%":"70%",left:s.isMobile?"5%":"25%",padding:"12px 24px",backgroundColor:"rgba(255, 107, 53, 0.9)",color:"white",border:"2px solid #ff6b35",borderRadius:"8px",cursor:"pointer",pointerEvents:"auto",fontSize:s.isMobile?"14px":"16px",fontWeight:"bold",zIndex:50,boxShadow:"0 0 20px rgba(255, 107, 53, 0.5)",transform:"none",maxWidth:"200px"},onClick:()=>m(u.VERSUS),children:"대전 모드 - Combat"})]}),i===u.TRAINING&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"training-screen","data-testid":"training-screen",style:{pointerEvents:"none",width:"100%",height:"100%",position:"absolute"}}),t.jsx("button",{"data-testid":"return-to-menu-button",style:{position:"absolute",bottom:"10%",right:"10%",padding:"10px 20px",backgroundColor:"rgba(74, 85, 104, 0.8)",color:"white",border:"2px solid #4a5568",borderRadius:"6px",cursor:"pointer",pointerEvents:"auto",fontSize:"14px",zIndex:50},onClick:f,children:"메뉴로 돌아가기 - Return to Menu"})]}),(i===u.VERSUS||i===u.PRACTICE)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"combat-screen","data-testid":"combat-screen",style:{pointerEvents:"none",width:"100%",height:"100%",position:"absolute"}}),t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"24px",fontWeight:"bold",pointerEvents:"none",zIndex:50},children:"Combat - 전투"}),t.jsx("button",{"data-testid":"return-to-menu-button",style:{position:"absolute",top:"20px",right:"20px",padding:"10px 20px",backgroundColor:"rgba(74, 85, 104, 0.8)",color:"white",border:"2px solid #4a5568",borderRadius:"6px",cursor:"pointer",pointerEvents:"auto",fontSize:"14px",zIndex:50},onClick:f,children:"메뉴"})]})]})]})})}const F=C.createRoot(document.getElementById("root"));F.render(t.jsx(M.StrictMode,{children:t.jsx(R,{children:t.jsx(H,{})})}));document.title="흑괘 무술 도장 - Black Trigram Martial Arts";
